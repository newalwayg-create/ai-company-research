<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI企業研究ツール | 就活生向け無料分析</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/babel-standalone@7.18.9/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState } = React;

const App = () => {
    const [url, setUrl] = useState("");
    const [research, setResearch] = useState("");
    const [loading, setLoading] = useState(false);

    const generateResearch = async () => {
        if (!url) return alert("URLを入力してください");
        setLoading(true);
        setResearch("");

        try {
            const res = await fetch("/api/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ url })
            });
            const data = await res.json();
            setResearch(data.answer);
        } catch (err) {
            console.error(err);
            setResearch("AI呼び出し中にエラーが発生しました。");
        }

        setLoading(false);
    };

    return (
        <div className="max-w-3xl mx-auto p-6 bg-gray-50 min-h-screen">
            <h1 className="text-3xl font-bold text-blue-600 mb-6 text-center">
                AI企業研究ツール
            </h1>

            <div className="mb-6 bg-white p-4 rounded-lg shadow">
                <h2 className="text-xl font-semibold mb-2">企業研究</h2>
                <input
                    type="text"
                    className="w-full p-2 border rounded mb-2 focus:outline-none focus:border-blue-500"
                    placeholder="企業のHP URL（例: https://toyota.jp）"
                    value={url}
                    onChange={(e) => setUrl(e.target.value)}
                />
                <button
                    className="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition"
                    onClick={generateResearch}
                >
                    {loading ? "分析中..." : "分析開始"}
                </button>

                {research && (
                    <div className="mt-4 p-4 bg-gray-100 rounded">
                        <h3 className="font-semibold">分析結果</h3>
                        <pre className="whitespace-pre-wrap">{research}</pre>
                    </div>
                )}
            </div>
        </div>
    );
};

ReactDOM.render(<App />, document.getElementById("root"));
</script>
</body>
</html>
